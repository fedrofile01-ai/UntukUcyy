<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Kejutan Cinta</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        height: 100vh;
        width: 100vw;
        background: #040417;
        overflow: hidden;
        font-family: Poppins, sans-serif;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: env(safe-area-inset-top) env(safe-area-inset-right)
          env(safe-area-inset-bottom) env(safe-area-inset-left);
      }
      #heartsCanvas {
        position: fixed;
        inset: 0;
        z-index: 0;
      }
      .wrapper {
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
      .desc {
        margin-bottom: 20px;
        font-size: clamp(1rem, 3vw, 1.2rem);
        opacity: 0.9;
      }
      .btn {
        padding: 18px 26px;
        border: none;
        border-radius: 32px;
        background: linear-gradient(90deg, #ff6b81, #ff9aa2);
        color: #fff;
        font-size: clamp(1rem, 3.5vw, 1.1rem);
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(255, 107, 129, 0.4);
        min-width: clamp(160px, 35vw, 220px);
        transition: transform 0.2s;
      }
      .btn:hover {
        transform: scale(1.07);
      }
      #choices {
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 3;
      }
      #question {
        font-size: clamp(1.2rem, 4vw, 1.6rem);
        margin-bottom: 25px;
        font-weight: 800;
        color: #ffdce3;
        text-shadow: 0 4px 15px rgba(255, 154, 162, 0.4);
      }
      .btn-row {
        display: flex;
        flex-direction: row;
        gap: 14px;
        flex-wrap: wrap;
        justify-content: center;
      }

      /* üì± Landscape mode */
      @media screen and (orientation: landscape) {
        #question {
          font-size: clamp(1rem, 3vw, 1.3rem);
          margin-bottom: 18px;
        }
        .btn {
          padding: 14px 20px;
          font-size: clamp(0.9rem, 2.5vw, 1rem);
          min-width: clamp(140px, 25vw, 180px);
        }
        .btn-row {
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="heartsCanvas"></canvas>

    <div class="wrapper" id="beforeReveal">
      <div class="desc">Klik tombol, aku mau bilang sesuatu...</div>
      <button class="btn" id="revealBtn">üíñ ENTER üíñ</button>
    </div>

    <div class="wrapper" id="choices">
      <div id="question">KAMU MAU GA JADI PACAR AKU?</div>
      <div class="btn-row">
        <button
          class="btn"
          onclick="window.location.href='https://discord.com/users/1079005110820151307'"
        >
          Kalo mau, DM ‚ù§Ô∏è
        </button>
        <button
          class="btn"
          onclick="window.location.href='https://discord.com/users/1079005110820151307'"
        >
          Kalo gamau, DM üíî
        </button>
      </div>
    </div>

    <audio id="bgMusic" autoplay loop muted>
      <source
        src="https://www.bensound.com/bensound-music/bensound-romantic.mp3"
        type="audio/mpeg"
      />
    </audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
    <script>
      const btn = document.getElementById("revealBtn");
      const before = document.getElementById("beforeReveal");
      const choices = document.getElementById("choices");
      const music = document.getElementById("bgMusic");

      function ensureMusic() {
        if (music.muted) {
          music.muted = false;
          music.play().catch(() => {});
        }
      }

      btn.onclick = () => {
        ensureMusic();
        before.style.display = "none";
        choices.style.display = "flex";
        const allBtns = choices.querySelectorAll(".btn");
        gsap.fromTo(
          "#question",
          { y: 40, opacity: 0 },
          { y: 0, opacity: 1, duration: 0.6, ease: "back.out(2)" }
        );
        gsap.fromTo(
          allBtns,
          { y: 40, opacity: 0 },
          {
            y: 0,
            opacity: 1,
            stagger: 0.15,
            duration: 0.6,
            ease: "back.out(2)",
            delay: 0.3,
          }
        );
        confetti({ particleCount: 400, spread: 200 });
      };

      // hearts background
      const c = document.getElementById("heartsCanvas"),
        g = c.getContext("2d");
      let W, H;
      function resize() {
        W = c.width = innerWidth;
        H = c.height = innerHeight;
      }
      resize();
      addEventListener("resize", resize);
      const hearts = [];
      function spawn() {
        return {
          x: Math.random() * W,
          y: -20,
          s: 0.5 + Math.random() * 1.5,
          v: 1 + Math.random(),
          a: 0.7,
        };
      }
      function draw(x, y, s, a) {
        g.save();
        g.translate(x, y);
        g.scale(s, s);
        g.globalAlpha = a;
        g.beginPath();
        for (let t = 0; t < 7; t += 0.2) {
          const xx = 16 * Math.pow(Math.sin(t), 3),
            yy = -(
              13 * Math.cos(t) -
              5 * Math.cos(2 * t) -
              2 * Math.cos(3 * t) -
              Math.cos(4 * t)
            );
          if (t === 0) g.moveTo(xx, yy);
          else g.lineTo(xx, yy);
        }
        g.closePath();
        g.fillStyle = "rgba(255,107,129,.9)";
        g.fill();
        g.restore();
      }
      function loop() {
        g.clearRect(0, 0, W, H);
        while (hearts.length < 70) hearts.push(spawn());
        hearts.forEach((h) => {
          h.y += h.v;
          h.x += Math.sin(h.y / 40);
          if (h.y > H + 30) {
            h.x = Math.random() * W;
            h.y = -20;
          }
          draw(h.x, h.y, h.s, h.a);
        });
        requestAnimationFrame(loop);
      }
      loop();
    </script>
  </body>
</html>
